{% extends 'base_course.html' %}

{% block subtitle %}
  {# I18N: Title of the webpage. #}
  - {{ gettext('Unit') }} {{ unit.index }} - {{ unit.title }}
{% endblock subtitle %}

{% block top_content %}
{% endblock %}

{% block main_content %}
<div class="col-md-12">
  {% if is_read_write_course and is_course_admin %}
    <div class="btn-group col-sm-push-9">
    <a href="dashboard?action=edit_unit&key={{ unit_id }}"
      class="btn btn-primary" role="button">Edit unit</a>
    {% if lesson %}
      <a href="dashboard?action=edit_lesson&key={{ lesson_id }}"
        class="btn btn-primary" role="button">Edit lesson</a>
    {% endif %}
    </div>
  {% endif %}
  
  <div class="col-md-offset-1">
    <h2>
      {# I18N: Header text for a unit page. #}
      {{ gettext('Unit %(id)s - %(title)s', id=unit.index, title=unit.title) }}
    </h2>
  </div>

  {% if lessons %}
    {% include 'lesson_navbar.html' %}
  {% endif %}

  <div role="main">
    {{course_info.unit.after_content_begins | safe}}

    {% if not lesson %}
      <div style="padding-bottom: 20px;">
        <div class="gcb-aside gcb-button-box">
          {# I18N: Text shown for a unit that has had no lessons added to it yet. #}
          {{ gettext('This unit does not contain any lessons.') }}
        </div>
      </div>
    {% else %}
      {% if lesson.now_available or is_course_admin %}
        <div class="gcb-cols">
          <div class="gcb-col-3">
            <p style="float:right; margin-top: 0px;">
              {% if lesson.notes %}
              <a role="button" class="gcb-button" id="lessonNotesLink" href="{{ lesson.notes }}" target="_blank">
                {# I18N: Link to a text version of a lesson video. #}
                {{ gettext('Text Version') }}
              </a>
              {% endif %}
            </p>
          </div>
        </div><!-- /gcb-cols -->

        {% if objectives %}
          <div class="gcb-lesson-content">
            {{ objectives | gcb_tags}}
          </div>
        {% endif %}

        {% if lesson.video %}
          <p class="gcb-video-container">
            {# I18N: Alt text for an embedded YouTube video player. #}
            <iframe class="youtube-player" title="{{ gettext('YouTube Video Player') }}"
                    type="text/html" width="650" height="400" frameborder="0" allowfullscreen
                    src="https://www.youtube.com/embed/{{ lesson.video }}?feature=player_embedded&rel=0">
            </iframe>
          </p>
        {% endif %}

      {% else %}

        <h1 class="gcb-lesson-title">
          {{ lesson.title }}
        </h1>

        <br><br>

        <div>
          {# I18N: Text shown for a lesson that has not been made public. #}
          {{ gettext('This lesson is not available.')}}
        </div>

      {% endif %}

    {% endif %}
    {{course_info.unit.before_content_ends | safe}}
  </div>
</div>

{% endblock %}
